<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Huerta Escolar Automatizada</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: #f0f4f8;
      color: #333;
      margin: 0;
    }
    header {
      background: linear-gradient(135deg, #2e7d32, #66bb6a);
      color: white;
      padding: 40px 20px;
      text-align: center;
      border-bottom-left-radius: 50% 10%;
      border-bottom-right-radius: 50% 10%;
    }
    nav {
      position: sticky;
      top: 0;
      background: #1b5e20;
      padding: 12px;
      text-align: center;
    }
    nav a {
      color: white;
      text-decoration: none;
      margin: 0 15px;
      font-weight: bold;
      transition: color 0.3s, transform 0.2s;
    }
    nav a:hover {
      color: #a5d6a7;
      transform: scale(1.1);
    }
    section {
      max-width: 900px;
      margin: 30px auto;
      padding: 25px;
      background: white;
      border-radius: 15px;
      box-shadow: 0px 4px 20px rgba(0,0,0,0.1);
    }
    h2 {
      color: #2e7d32;
      margin-bottom: 15px;
    }
    canvas {
      margin: 20px auto;
      display: block;
      max-width: 100%;
    }
    footer {
      text-align: center;
      padding: 20px;
      margin-top: 40px;
      background: #2e7d32;
      color: white;
      border-top-left-radius: 20px;
      border-top-right-radius: 20px;
    }
  </style>
</head>
<body>
  <header>
    <h1>üå± Huerta Escolar Automatizada</h1>
    <p>Proyecto acad√©mico - GitHub Pages</p>
  </header>

  <nav>
    <a href="#integrantes">Integrantes</a>
    <a href="#sensores">Sensores</a>
    <a href="#app">App</a>
    <a href="#diagrama">Diagrama</a>
    <a href="#graficas">Gr√°ficas</a>
  </nav>

  <section id="graficas">
    <h2>üìà Gr√°ficas de Lecturas en Tiempo Real</h2>
    <canvas id="graficoHumedad"></canvas>
    <canvas id="graficoTempHum"></canvas>
    <canvas id="graficoLuz"></canvas>
  </section>

  <footer>
    üåç Proyecto acad√©mico - Huerta Automatizada | GitHub Pages | 2025
  </footer>

  <script>
    // Funci√≥n para obtener hora actual (ej: "10:25")
    function getHora() {
      const ahora = new Date();
      return ahora.getHours() + ":" + String(ahora.getMinutes()).padStart(2, "0");
    }

    // --- Humedad del Suelo ---
    const ctx1 = document.getElementById('graficoHumedad').getContext('2d');
    const graficoHumedad = new Chart(ctx1, {
      type: 'line',
      data: {
        labels: [getHora()],
        datasets: [{
          label: 'Humedad del Suelo',
          data: [Math.floor(Math.random() * 300 + 400)], // valor inicial random
          borderColor: '#2e7d32',
          backgroundColor: 'rgba(46,125,50,0.2)',
          fill: true,
          tension: 0.3
        }]
      }
    });

    // --- Temperatura y Humedad Ambiental ---
    const ctx2 = document.getElementById('graficoTempHum').getContext('2d');
    const graficoTempHum = new Chart(ctx2, {
      type: 'line',
      data: {
        labels: [getHora()],
        datasets: [
          {
            label: 'Temperatura (¬∞C)',
            data: [Math.floor(Math.random() * 5 + 20)],
            borderColor: '#e53935',
            backgroundColor: 'rgba(229,57,53,0.2)',
            fill: true,
            tension: 0.3
          },
          {
            label: 'Humedad (%)',
            data: [Math.floor(Math.random() * 10 + 50)],
            borderColor: '#1e88e5',
            backgroundColor: 'rgba(30,136,229,0.2)',
            fill: true,
            tension: 0.3
          }
        ]
      }
    });

    // --- Luz Solar ---
    const ctx3 = document.getElementById('graficoLuz').getContext('2d');
    const graficoLuz = new Chart(ctx3, {
      type: 'bar',
      data: {
        labels: [getHora()],
        datasets: [{
          label: 'Intensidad de Luz (lux)',
          data: [Math.floor(Math.random() * 1000 + 200)],
          backgroundColor: 'rgba(255, 215, 0, 0.7)',
          borderColor: '#fbc02d'
        }]
      }
    });

    // --- Actualizaci√≥n autom√°tica cada 5s ---
    setInterval(() => {
      const hora = getHora();

      // Limitar a 8 puntos en pantalla
      if (graficoHumedad.data.labels.length > 8) {
        graficoHumedad.data.labels.shift();
        graficoHumedad.data.datasets[0].data.shift();

        graficoTempHum.data.labels.shift();
        graficoTempHum.data.datasets[0].data.shift();
        graficoTempHum.data.datasets[1].data.shift();

        graficoLuz.data.labels.shift();
        graficoLuz.data.datasets[0].data.shift();
      }

      // Agregar nuevo dato
      graficoHumedad.data.labels.push(hora);
      graficoHumedad.data.datasets[0].data.push(Math.floor(Math.random() * 300 + 400));

      graficoTempHum.data.labels.push(hora);
      graficoTempHum.data.datasets[0].data.push(Math.floor(Math.random() * 5 + 20)); // temp
      graficoTempHum.data.datasets[1].data.push(Math.floor(Math.random() * 10 + 50)); // humedad

      graficoLuz.data.labels.push(hora);
      graficoLuz.data.datasets[0].data.push(Math.floor(Math.random() * 1000 + 200));

      // Refrescar gr√°ficas
      graficoHumedad.update();
      graficoTempHum.update();
      graficoLuz.update();
    }, 5000);
  </script>
</body>
</html>
