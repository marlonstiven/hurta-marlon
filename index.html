<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Huerta Escolar Automatizada</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f6f9; color: #333; }
    header { background: #2e7d32; color: white; padding: 20px; text-align: center; }
    header h1 { margin: 0; font-size: 2em; }
    nav { position: sticky; top: 0; background: #1b5e20; padding: 10px; z-index: 1000; text-align: center; }
    nav a { color: white; text-decoration: none; margin: 0 15px; font-weight: bold; transition: color 0.3s; }
    nav a:hover { color: #a5d6a7; }
    section { max-width: 1000px; margin: 30px auto; padding: 20px; background: white; border-radius: 10px; box-shadow: 0px 4px 10px rgba(0,0,0,0.1); }
    h2 { color: #2e7d32; margin-top: 0; }
    ul { line-height: 1.8; }
    .roles { display: flex; justify-content: space-between; margin-bottom: 20px; }
    .roles div { width: 45%; background: #e8f5e9; padding: 10px; border-radius: 8px; }
    footer { text-align: center; padding: 15px; margin-top: 30px; background: #2e7d32; color: white; font-size: 0.9em; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    table, th, td { border: 1px solid #c8e6c9; }
    th { background: #a5d6a7; color: #1b5e20; padding: 8px; }
    td { padding: 6px; text-align: center; }
    .alerta { font-weight: bold; margin: 10px 0; padding: 10px; border-radius: 5px; display: inline-block; }
    .ok { background: #e8f5e9; color: #2e7d32; border: 1px solid #2e7d32; }
    .warn { background: #ffebee; color: #c62828; border: 1px solid #c62828; }
    #resetBtn { margin-top: 15px; padding: 10px 20px; background: #1b5e20; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
    #resetBtn:hover { background: #388e3c; }
    canvas { margin: 20px 0; }
  </style>
</head>
<body>
  <header>
    <h1>ğŸŒ± Huerta Escolar Automatizada</h1>
    <p>Proyecto acadÃ©mico</p>
  </header>

  <nav>
    <a href="#integrantes">Integrantes</a>
    <a href="#justificacion">JustificaciÃ³n</a>
    <a href="#sensores">Sensores</a>
    <a href="#app">App</a>
    <a href="#diagrama">Diagrama</a>
    <a href="#explicacion">ExplicaciÃ³n</a>
    <a href="#comunicacion">ComunicaciÃ³n</a>
    <a href="#graficas">GrÃ¡ficas</a>
  </nav>

  <section id="integrantes">
    <h2>ğŸ‘¥ Integrantes y Roles</h2>
    <div class="roles">
      <div><strong>LÃ­der TÃ©cnico:</strong> Marlon Marin</div>
      <div><strong>LÃ­der Documental:</strong> Marlon Marin</div>
    </div>
  </section>

  <section id="justificacion">
    <h2>ğŸ¯ JustificaciÃ³n</h2>
    <p>
      La <strong>huerta escolar automatizada</strong> busca la alimentaciÃ³n saludable y el aprendizaje prÃ¡ctico de tecnologÃ­as.
      Mediante sensores se podrÃ¡ monitorear la humedad del suelo, la luz solar y la temperatura, garantizando mejores condiciones para el crecimiento de las plantas.
    </p>
  </section>

  <section id="sensores">
    <h2>ğŸ”§ Sensores</h2>
    <ul>
      <li>ğŸ’§ Humedad del suelo</li>
      <li>ğŸŒ¡ï¸ Temperatura (DHT11/DHT22)</li>
      <li>â˜€ï¸ Sensor de luz (LDR o BH1750)</li>
    </ul>
  </section>

  <section id="app">
    <h2>ğŸ“² Descargar la App</h2>
    <p>ğŸ‘‰ <a href="https://github.com/marlonstiven/hurta-marlon/raw/refs/heads/main/huertaApp.apk" download>Descargar huertaApp.apk</a></p>
    <p>ğŸ‘‰ <a href="https://github.com/marlonstiven/hurta-marlon/raw/refs/heads/main/huertaApp%20(1).aia" download>Descargar huertaApp.aia</a></p>
  </section>

  <section id="diagrama">
    <h2>ğŸ“Š Diagrama de Bloques del Sistema</h2>
    <img src="diagrama.png" alt="Diagrama del sistema" style="max-width:80%; border:1px solid #ccc; border-radius:8px; display:block; margin:auto;">
  </section>

  <section id="explicacion">
    <h2>âš™ï¸ ExplicaciÃ³n del DiseÃ±o TÃ©cnico</h2>
    <ul>
      <li>Los sensores recogen datos en tiempo real.</li>
      <li>El <b>ESP32</b> procesa la informaciÃ³n y decide si activar el riego automÃ¡tico.</li>
      <li>Los datos se envÃ­an a la <b>app en App Inventor</b> mediante Bluetooth.</li>
      <li>El usuario puede visualizar y controlar manualmente el sistema de riego.</li>
    </ul>
  </section>

  <section id="comunicacion">
    <h2>ğŸ”— ComunicaciÃ³n y AplicaciÃ³n</h2>
    <p><b>ComunicaciÃ³n: Bluetooth</b> â†’ No requiere Internet, bajo consumo, conexiÃ³n rÃ¡pida.</p>
    <p><b>AplicaciÃ³n: App Inventor</b> â†’ FÃ¡cil, accesible, integra mÃ³dulos Bluetooth.</p>
  </section>

  <section id="graficas">
    <h2>ğŸ“ˆ GrÃ¡ficas y Alertas en Tiempo Real</h2>

    <!-- HUMEDAD -->
    <h3>ğŸ’§ Humedad</h3>
    <canvas id="graficaHumedad"></canvas>
    <div id="alertaHumedad" class="alerta ok">âœ” Humedad adecuada</div>

    <!-- TEMPERATURA -->
    <h3>ğŸŒ¡ï¸ Temperatura</h3>
    <canvas id="graficaTemp"></canvas>
    <div id="alertaTemp" class="alerta ok">âœ” Temperatura adecuada</div>

    <!-- LUZ -->
    <h3>â˜€ï¸ Luz</h3>
    <canvas id="graficaLuz"></canvas>
    <div id="alertaLuz" class="alerta ok">âœ” Luz adecuada</div>

    <h3>ğŸ“‹ Registros de Datos</h3>
    <table id="tabla">
      <thead>
        <tr>
          <th>Hora</th>
          <th>Humedad</th>
          <th>Temperatura</th>
          <th>Luz</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <button id="resetBtn">ğŸ”„ Reiniciar datos</button>
  </section>

  <footer>
    ğŸŒ Proyecto acadÃ©mico - GitHub Pages | 2025
  </footer>

  <script>
    // ---- CONFIGURACIÃ“N DE GRÃFICAS ----
    const graficaHumedad = new Chart(document.getElementById('graficaHumedad'), {
      type: 'line',
      data: { labels: [], datasets: [{ label: 'Humedad', data: [], borderColor: 'blue', backgroundColor: 'rgba(33,150,243,0.2)', borderWidth: 2, fill: true }] },
      options: { scales: { y: { min: 300, max: 800 } } }
    });

    const graficaTemp = new Chart(document.getElementById('graficaTemp'), {
      type: 'line',
      data: { labels: [], datasets: [{ label: 'Temperatura', data: [], borderColor: 'red', backgroundColor: 'rgba(244,67,54,0.2)', borderWidth: 2, fill: true }] },
      options: { scales: { y: { min: 0, max: 50 } } }
    });

    const graficaLuz = new Chart(document.getElementById('graficaLuz'), {
      type: 'line',
      data: { labels: [], datasets: [{ label: 'Luz', data: [], borderColor: 'orange', backgroundColor: 'rgba(255,193,7,0.2)', borderWidth: 2, fill: true }] },
      options: { scales: { y: { min: 0, max: 1000 } } }
    });

    function obtenerDato(min, max) { return Math.floor(Math.random() * (max - min) + min); }

    function beep() {
      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioCtx.createOscillator();
      oscillator.type = "square";
      oscillator.frequency.setValueAtTime(500, audioCtx.currentTime);
      oscillator.connect(audioCtx.destination);
      oscillator.start();
      setTimeout(() => oscillator.stop(), 200);
    }

    // ---- ACTUALIZACIÃ“N DE DATOS ----
    const intervalo = setInterval(() => {
      const hora = new Date().toLocaleTimeString().slice(0,5);
      const humedad = obtenerDato(300, 800);
      const temp = obtenerDato(15, 40);
      const luz = obtenerDato(100, 900);

      // Actualizar grÃ¡ficas
      graficaHumedad.data.labels.push(hora);
      graficaHumedad.data.datasets[0].data.push(humedad);
      graficaHumedad.update();

      graficaTemp.data.labels.push(hora);
      graficaTemp.data.datasets[0].data.push(temp);
      graficaTemp.update();

      graficaLuz.data.labels.push(hora);
      graficaLuz.data.datasets[0].data.push(luz);
      graficaLuz.update();

      // Insertar en la tabla
      const fila = document.createElement("tr");
      fila.innerHTML = `<td>${hora}</td><td>${humedad}</td><td>${temp}</td><td>${luz}</td>`;
      document.querySelector("#tabla tbody").appendChild(fila);

      // Alertas
      const alertaHumedad = document.getElementById("alertaHumedad");
      const alertaTemp = document.getElementById("alertaTemp");
      const alertaLuz = document.getElementById("alertaLuz");

      if (humedad < 400) { alertaHumedad.textContent = "âš  Humedad baja"; alertaHumedad.className = "alerta warn"; beep(); }
      else if (humedad > 700) { alertaHumedad.textContent = "âš  Humedad alta"; alertaHumedad.className = "alerta warn"; beep(); }
      else { alertaHumedad.textContent = "âœ” Humedad adecuada"; alertaHumedad.className = "alerta ok"; }

      if (temp < 18) { alertaTemp.textContent = "âš  Temperatura baja"; alertaTemp.className = "alerta warn"; beep(); }
      else if (temp > 35) { alertaTemp.textContent = "âš  Temperatura alta"; alertaTemp.className = "alerta warn"; beep(); }
      else { alertaTemp.textContent = "âœ” Temperatura adecuada"; alertaTemp.className = "alerta ok"; }

      if (luz < 200) { alertaLuz.textContent = "âš  Poca luz"; alertaLuz.className = "alerta warn"; beep(); }
      else if (luz > 800) { alertaLuz.textContent = "âš  Exceso de luz"; alertaLuz.className = "alerta warn"; beep(); }
      else { alertaLuz.textContent = "âœ” Luz adecuada"; alertaLuz.className = "alerta ok"; }

    }, 5000);

    // ---- BOTÃ“N REINICIAR ----
    document.getElementById("resetBtn").addEventListener("click", () => {
      graficaHumedad.data.labels = []; graficaHumedad.data.datasets[0].data = []; graficaHumedad.update();
      graficaTemp.data.labels = []; graficaTemp.data.datasets[0].data = []; graficaTemp.update();
      graficaLuz.data.labels = []; graficaLuz.data.datasets[0].data = []; graficaLuz.update();
      document.querySelector("#tabla tbody").innerHTML = "";
      document.getElementById("alertaHumedad").textContent = "âœ” Humedad adecuada"; document.getElementById("alertaHumedad").className = "alerta ok";
      document.getElementById("alertaTemp").textContent = "âœ” Temperatura adecuada"; document.getElementById("alertaTemp").className = "alerta ok";
      document.getElementById("alertaLuz").textContent = "âœ” Luz adecuada"; document.getElementById("alertaLuz").className = "alerta ok";
    });
  </script>
</body>
</html>


